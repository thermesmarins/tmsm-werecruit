(function($){"use strict";jQuery(function($){if($("#tmsm-werecruit-container").length>0){var $skipPushState=false;var $load=function(){$("#tmsm-werecruit-filterform").submit(function(e){console.log("submitting");e.preventDefault();var filter=$("#tmsm-werecruit-filterform");var originalbutton=filter.find("button").text();$.ajax({url:filter.attr("action"),data:filter.serialize(),type:filter.attr("method"),beforeSend:function(xhr){console.log("beforeSend");$("#tmsm-werecruit-filterresponse").addClass("loading");$("#tmsm-werecruit-loadingexplaination").text(tmsm_werecruit_params.i18n.loadingexplaination);filter.find("button").text(tmsm_werecruit_params.i18n.loading)},success:function(data){$("#tmsm-werecruit-filterresponse").removeClass("loading");console.log("success");filter.find("button").text(originalbutton);$("#tmsm-werecruit-filterresponse").empty().html(data);if($skipPushState!==false){history.pushState({},"",window.location.pathname+"#"+filter.serialize())}},error:function(data){console.log("error");$("#tmsm-werecruit-filterresponse").removeClass("loading")}});return false})};var $reloadQueryString=function(){if("URLSearchParams"in window){var parsedHash=new URLSearchParams(window.location.hash.substr(1));const filters=["type","contract"];var count_changes=0;filters.forEach(function(item){if(parsedHash.get(item)!==null){count_changes++}$("#tmsm-werecruit-"+item).val(parsedHash.get(item))});if(count_changes>0){$("#tmsm-werecruit-filterform").submit()}}};$load();$reloadQueryString();window.onpopstate=function(event){$skipPushState=true;$reloadQueryString()}}})})(jQuery);